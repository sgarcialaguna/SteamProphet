{% extends 'SteamProphet/base.html' %}
{% load humanize %}

{% block content %}
    <div class="container">
        <h1 class="mb-4">Game: {{ object.name }}{% if game.matured %}*{% endif %}</h1>

        <img src="http://cdn.akamai.steamstatic.com/steam/apps/{{ game.appID }}/header.jpg" class="img-fluid">

        <div class="row mb-2 justify-content-start">
            <div class="col-lg-1 col-md-2"><a href="{{ game.steamspyURL }}">SteamSpy</a></div>
            <div class="col-lg-1 col-md-2"><a href="{{ game.steamURL }}">Steam</a></div>
        </div>

        <div>
            <b>Release date</b>
        </div>
        <div class="mb-2">
            {{ game.releaseDate }}
        </div>

        <div>
            <b>Lowest price</b>
        </div>
        <div class="mb-2">
            $ {{ game.price }}
        </div>

        <div>
            <b>Players</b>
        </div>
        <div class="mb-2">
            {{ game.players|intcomma }}
        </div>

        <div>
            <b>Players Variance</b>
        </div>
        <div class="mb-2">
            {{ game.playersVariance|intcomma }}
        </div>

        <div>
            <b>Score</b>
        </div>
        <div>
            {{ game.price }} * max(0, {{ game.players|intcomma }} - {{ game.playersVariance|intcomma }})
        </div>
        <div>
            = {{ game.price }} * {{ game.playersLowerBound|intcomma }}
        </div>
        <div>
            = {{ game.unroundedScore|intcomma }}
        </div>
        <div>
           Rounded down to the nearest thousand:
        </div>
        <div>
            = <b>{{ game.score|intcomma }}</b>
        </div>

        <div class="mb-2"></div>
        <p>This game has matured and will earn no more points.</p>

        {% if user.is_staff %}
            <div class="mb-"></div>
            <a href="{% url 'delete_game' game.pk %}"><button type="button" class="btn btn-danger">Delete game</button></a>
        {% endif %}
    </div>
{% endblock %}
